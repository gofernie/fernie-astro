---
const {
  title = "Fernie Real Estate",
  description = "",
  active = "", // "home" | "neighbourhoods" | ...
} = Astro.props;

const nav = [
  { href: "/", label: "Home", key: "home" },
  { href: "/neighbourhoods", label: "Neighbourhoods", key: "neighbourhoods" },
  { href: "#", label: "Buy", key: "buy" },
  { href: "#", label: "Sell", key: "sell" },
  { href: "#", label: "Contact", key: "contact" },
];
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <slot name="head" />
    <style>
      :root { --max:72rem; --pad:16px; }
      * { box-sizing: border-box; }
      body { margin:0; font:16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:#111; background:#fff; }
      .container { max-width: var(--max); margin: 0 auto; padding: var(--pad); }

      /* Sticky header — reserve height to prevent CLS */
      .site-header {
        position: sticky; top: 0; z-index: 50;
        background: rgba(255,255,255,.82);
        backdrop-filter: blur(8px);
        border-bottom: 1px solid #eee;
      }
      .bar {
        display:flex; align-items:center; justify-content:space-between; gap:12px;
        min-height: 64px;              /* reserves header height */
      }
      @media (max-width: 480px) {
        .bar { min-height: 84px; }     /* allow for wrapping nav without shifting */
      }

      .brand { display:flex; align-items:center; gap:10px; text-decoration:none; color:#111; font-weight:700; }
      .brand span { white-space: nowrap; }  /* prevent wrap-jump */
      .brand img { display:block; height:auto; }

      .nav { display:flex; gap:12px; flex-wrap:wrap; }
      .link { color:#111; text-decoration:none; padding:8px 10px; border-radius:10px; }
      .link:hover { background:#f5f5f5; }
      .link.active { border:1px solid #111; }

      footer { border-top:1px solid #eee; color:#666; }
    </style>
  </head>
  <body>
    <header class="site-header">
      <div class="container bar">
        <a class="brand" href="/">
          <!-- Give the logo intrinsic size so layout doesn't reflow when it loads -->
          <img src="/logo.svg" alt="Fernie Real Estate" width="120" height="30" onerror="this.style.display='none'" />
          <span>FERNIE • REAL ESTATE</span>
        </a>
        <nav class="nav" aria-label="Primary">
          {nav.map(n => (
            <a class={`link ${active === n.key ? 'active' : ''}`} href={n.href}>{n.label}</a>
          ))}
        </nav>
      </div>
    </header>

    <!-- Optional full-bleed hero area -->
    <slot name="hero" />

    <!-- Main page content -->
    <main class="container">
      <slot />
    </main>

    <footer class="container">© {new Date().getFullYear()} Chris Crump</footer>
  </body>
</html>
